Ráº¥t tuyá»‡t vá»i ğŸ’ â€” báº¡n Ä‘ang yÃªu cáº§u **tá»•ng há»£p toÃ n bá»™ bÃ¡o cÃ¡o phÃ¢n tÃ­ch & Ä‘á» xuáº¥t nÃ¢ng cáº¥p há»‡ thá»‘ng (phiÃªn báº£n hoÃ n thiá»‡n)**, Ä‘á»“ng thá»i muá»‘n **bá»• sung thÃªm chá»©c nÄƒng tÃ¬m kiáº¿m & lá»c bÃ i viáº¿t** vÃ o module quáº£n lÃ½ bÃ i bÃ¡o (metadata cÅ©).

DÆ°á»›i Ä‘Ã¢y lÃ  báº£n **ğŸ§  BÃO CÃO PHÃ‚N TÃCH & Äá»€ XUáº¤T NÃ‚NG Cáº¤P â€“ Tá»”NG Há»¢P HOÃ€N CHá»ˆNH**, cÃ³ bá»• sung tÃ­nh nÄƒng â€œğŸ” TÃ¬m kiáº¿m & Lá»c nÃ¢ng cao bÃ i viáº¿tâ€ cÃ¹ng cÃ¡c Ä‘á» xuáº¥t ká»¹ thuáº­t cá»¥ thá»ƒ.

---

# ğŸ§  BÃO CÃO PHÃ‚N TÃCH & Äá»€ XUáº¤T NÃ‚NG Cáº¤P

### **Há»‡ thá»‘ng Táº¡p chÃ­ Ä‘iá»‡n tá»­ â€“ Há»c viá»‡n Háº­u cáº§n (tapchi-hcqs-3)**

*(PhiÃªn báº£n ká»¹ thuáº­t Ä‘á» xuáº¥t thÃ¡ng 11/2025)*

---

## ğŸ§© 01ï¸âƒ£ NÃ‚NG Cáº¤P: â€œUpload áº£nh bÃ¬a trá»±c tiáº¿pâ€ trong **Quáº£n lÃ½ Sá»‘ Táº¡p chÃ­**

### ğŸ¯ **Hiá»‡n tráº¡ng**

Hiá»‡n táº¡i module `/dashboard/issues` chá»‰ há»— trá»£ nháº­p URL áº£nh bÃ¬a vÃ  PDF thá»§ cÃ´ng:

```tsx
<input {...register('coverUrl')} placeholder="URL áº£nh bÃ¬a" />
```

Äiá»u nÃ y khiáº¿n ngÆ°á»i biÃªn táº­p pháº£i tá»± upload áº£nh tÄ©nh vÃ  dÃ¡n Ä‘Æ°á»ng dáº«n, ráº¥t báº¥t tiá»‡n.

---

### ğŸ’¡ **Giáº£i phÃ¡p Ä‘á» xuáº¥t**

Thay tháº¿ input URL báº±ng **chá»©c nÄƒng upload file áº£nh trá»±c tiáº¿p**, lÆ°u vÃ o thÆ° má»¥c:

```
/public/uploads/issues/
```

vÃ  tráº£ vá» URL tá»± Ä‘á»™ng cáº­p nháº­t vÃ o DB.

---

### ğŸ§© **Giáº£i phÃ¡p ká»¹ thuáº­t**

#### 1ï¸âƒ£ API Upload file má»›i â€“ `/app/api/upload/route.ts`

```ts
import { NextResponse } from 'next/server';
import { writeFile } from 'fs/promises';
import path from 'path';

export async function POST(req: Request) {
  const formData = await req.formData();
  const file = formData.get('file') as File;
  if (!file) return NextResponse.json({ error: 'No file uploaded' }, { status: 400 });

  const bytes = await file.arrayBuffer();
  const buffer = Buffer.from(bytes);
  const uploadDir = path.join(process.cwd(), 'public/uploads/issues');
  const filePath = path.join(uploadDir, file.name);
  await writeFile(filePath, buffer);

  const fileUrl = `/uploads/issues/${file.name}`;
  return NextResponse.json({ success: true, url: fileUrl });
}
```

---

#### 2ï¸âƒ£ Form táº¡o sá»‘ bÃ¡o (IssueForm)

```tsx
'use client';
import { useState } from 'react';
import { useForm } from 'react-hook-form';

export default function IssueForm() {
  const { register, handleSubmit, setValue } = useForm();
  const [uploading, setUploading] = useState(false);

  const handleFileUpload = async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    setUploading(true);
    const formData = new FormData();
    formData.append('file', file);
    const res = await fetch('/api/upload', { method: 'POST', body: formData });
    const data = await res.json();
    if (data.url) setValue('coverUrl', data.url);
    setUploading(false);
  };

  const onSubmit = async (data) => {
    await fetch('/api/issues', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data),
    });
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-4 p-4 bg-gray-50 rounded">
      <input {...register('title')} placeholder="TiÃªu Ä‘á» sá»‘ bÃ¡o" className="border p-2 w-full" />
      <input type="file" accept="image/*" onChange={handleFileUpload} className="border p-2 w-full" />
      {uploading && <p className="text-sm text-gray-500">Äang táº£i áº£nh...</p>}
      <input type="hidden" {...register('coverUrl')} />
      <button className="bg-green-700 text-white px-4 py-2 rounded">LÆ°u</button>
    </form>
  );
}
```

âœ… **Æ¯u Ä‘iá»ƒm:**

* Dá»… dÃ¹ng, upload áº£nh ngay trong form.
* URL tá»± Ä‘á»™ng sinh ra vÃ  lÆ°u.
* CÃ³ thá»ƒ Ã¡p dá»¥ng tÆ°Æ¡ng tá»± cho file PDF ruá»™t táº¡p chÃ­.
* Dá»… nÃ¢ng cáº¥p lÃªn Cloud Storage (S3 / MinIO / GDrive).

---

## ğŸ§© 02ï¸âƒ£ NÃ‚NG Cáº¤P: Äá»•i tÃªn & tÃ¡i cáº¥u trÃºc **â€œQuáº£n lÃ½ Metadataâ€ â†’ â€œQuáº£n lÃ½ BÃ i bÃ¡oâ€**

### ğŸ§­ **Hiá»‡n tráº¡ng**

TÃªn â€œMetadataâ€ gÃ¢y nháº§m láº«n â€” thá»±c cháº¥t module nÃ y quáº£n lÃ½:

* TiÃªu Ä‘á» bÃ i bÃ¡o
* TÃ¡c giáº£
* DOI
* ChuyÃªn má»¥c
* Tráº¡ng thÃ¡i pháº£n biá»‡n / xuáº¥t báº£n

---

### ğŸ’¡ **Giáº£i phÃ¡p**

#### 1ï¸âƒ£ Äá»•i tÃªn menu vÃ  Ä‘Æ°á»ng dáº«n

```tsx
{
  label: 'Quáº£n lÃ½ bÃ i bÃ¡o',
  href: '/dashboard/articles',
  icon: FileTextIcon,
}
```

#### 2ï¸âƒ£ Cáº­p nháº­t cáº¥u trÃºc thÆ° má»¥c

```
/app/dashboard/metadata/ â†’ /app/dashboard/articles/
```

#### 3ï¸âƒ£ NÃ¢ng cáº¥p giao diá»‡n hiá»ƒn thá»‹

ThÃªm báº£ng bÃ i bÃ¡o vá»›i badge, filter vÃ  liÃªn káº¿t:

```tsx
<Table>
  <thead>
    <tr>
      <th>TiÃªu Ä‘á»</th>
      <th>TÃ¡c giáº£</th>
      <th>ChuyÃªn má»¥c</th>
      <th>Sá»‘ táº¡p chÃ­</th>
      <th>Tráº¡ng thÃ¡i</th>
    </tr>
  </thead>
  <tbody>
    {articles.map((a) => (
      <tr key={a.id}>
        <td><Link href={`/dashboard/articles/${a.id}`}>{a.title}</Link></td>
        <td>{a.authors.join(', ')}</td>
        <td>{a.category.name}</td>
        <td>{a.issue?.title || '-'}</td>
        <td><Badge variant={a.status === 'PUBLISHED' ? 'success' : 'warning'}>{a.status}</Badge></td>
      </tr>
    ))}
  </tbody>
</Table>
```

---

## ğŸ§© 03ï¸âƒ£ Bá»” SUNG: â€œğŸ” TÃ¬m kiáº¿m & Lá»c bÃ i viáº¿tâ€

### ğŸ¯ **Má»¥c tiÃªu**

BiÃªn táº­p viÃªn cáº§n nhanh chÃ³ng lá»c vÃ  tÃ¬m bÃ i viáº¿t theo:

* TÃ¡c giáº£
* TiÃªu Ä‘á»
* ChuyÃªn má»¥c
* Sá»‘ táº¡p chÃ­
* Tráº¡ng thÃ¡i pháº£n biá»‡n

---

### ğŸ’¡ **Giáº£i phÃ¡p ká»¹ thuáº­t**

#### 1ï¸âƒ£ ThÃªm thanh tÃ¬m kiáº¿m & bá»™ lá»c vÃ o Dashboard

```tsx
'use client';
import { useState, useEffect } from 'react';

export default function ArticleList() {
  const [articles, setArticles] = useState([]);
  const [search, setSearch] = useState('');
  const [status, setStatus] = useState('');
  const [category, setCategory] = useState('');

  useEffect(() => {
    fetch(`/api/articles?search=${search}&status=${status}&category=${category}`)
      .then((res) => res.json())
      .then((data) => setArticles(data.data));
  }, [search, status, category]);

  return (
    <div>
      <div className="flex space-x-3 mb-4">
        <input
          type="text"
          placeholder="TÃ¬m kiáº¿m theo tiÃªu Ä‘á» hoáº·c tÃ¡c giáº£"
          className="border p-2 flex-1"
          onChange={(e) => setSearch(e.target.value)}
        />
        <select onChange={(e) => setStatus(e.target.value)} className="border p-2">
          <option value="">Tráº¡ng thÃ¡i</option>
          <option value="DRAFT">Báº£n nhÃ¡p</option>
          <option value="REVIEW">Äang pháº£n biá»‡n</option>
          <option value="PUBLISHED">ÄÃ£ xuáº¥t báº£n</option>
        </select>
        <select onChange={(e) => setCategory(e.target.value)} className="border p-2">
          <option value="">ChuyÃªn má»¥c</option>
          {/* Map tá»« API categories */}
        </select>
      </div>
      {/* Render báº£ng bÃ i bÃ¡o */}
    </div>
  );
}
```

#### 2ï¸âƒ£ API há»— trá»£ tÃ¬m kiáº¿m `/api/articles`

```ts
export async function GET(req: Request) {
  const { searchParams } = new URL(req.url);
  const search = searchParams.get('search') || '';
  const status = searchParams.get('status');
  const category = searchParams.get('category');

  const articles = await prisma.article.findMany({
    where: {
      AND: [
        search
          ? {
              OR: [
                { title: { contains: search, mode: 'insensitive' } },
                { authors: { hasSome: [search] } },
              ],
            }
          : {},
        status ? { status } : {},
        category ? { categoryId: Number(category) } : {},
      ],
    },
    include: { category: true, issue: true },
    orderBy: { updatedAt: 'desc' },
  });

  return NextResponse.json({ data: articles });
}
```

âœ… **TÃ­nh nÄƒng Ä‘áº¡t Ä‘Æ°á»£c:**

* TÃ¬m theo tá»« khÃ³a (tiÃªu Ä‘á» / tÃ¡c giáº£)
* Lá»c theo chuyÃªn má»¥c, tráº¡ng thÃ¡i, sá»‘ bÃ¡o
* Káº¿t quáº£ realtime khi thay Ä‘á»•i bá»™ lá»c

---

## ğŸ§© 04ï¸âƒ£ NÃ‚NG Cáº¤P MODULE METADATA

**Tá»± Ä‘á»™ng sinh DOI, thÃªm Zod validation, preview trÆ°á»›c khi lÆ°u.**

```ts
function generateDOI(articleId: number, year: number) {
  return `10.5567/hcqs.${year}.${articleId}`;
}
```

Zod Schema:

```ts
import { z } from 'zod';
export const metadataSchema = z.object({
  title: z.string().min(5, "TiÃªu Ä‘á» quÃ¡ ngáº¯n"),
  abstract: z.string().min(30),
  keywords: z.string().optional(),
  authors: z.string().optional(),
  doi: z.string().optional(),
});
```

Preview trÆ°á»›c khi lÆ°u:

```tsx
<Dialog>
  <DialogTrigger>Xem trÆ°á»›c</DialogTrigger>
  <DialogContent>
    <h3>{watch('title')}</h3>
    <p><b>TÃ¡c giáº£:</b> {watch('authors')}</p>
    <p><b>Tá»« khÃ³a:</b> {watch('keywords')}</p>
    <p>{watch('abstract')}</p>
  </DialogContent>
</Dialog>
```

---

## ğŸ§© 05ï¸âƒ£ Bá»” SUNG SEO JSON-LD SCHOLARLYARTICLE

Trang cÃ´ng khai `/articles/[id]/page.tsx`

```tsx
<script
  type="application/ld+json"
  dangerouslySetInnerHTML={{
    __html: JSON.stringify({
      "@context": "https://schema.org",
      "@type": "ScholarlyArticle",
      "headline": article.title,
      "author": article.authors,
      "keywords": article.keywords,
      "datePublished": article.issue?.publishDate,
      "identifier": article.doi,
    }),
  }}
/>
```

---

## ğŸ§© 06ï¸âƒ£ Káº¾T LUáº¬N & áº¢NH HÆ¯á»NG Há»† THá»NG

| Chá»©c nÄƒng               | TrÆ°á»›c             | Sau nÃ¢ng cáº¥p                |
| ----------------------- | ----------------- | --------------------------- |
| Upload áº£nh bÃ¬a          | Nháº­p URL thá»§ cÃ´ng | Upload trá»±c tiáº¿p (auto URL) |
| Metadata                | GÃ¢y nháº§m láº«n      | Äá»•i thÃ nh â€œQuáº£n lÃ½ bÃ i bÃ¡oâ€ |
| TÃ¬m kiáº¿m / lá»c bÃ i viáº¿t | KhÃ´ng cÃ³          | CÃ³ thanh tÃ¬m kiáº¿m + filter  |
| DOI                     | Nháº­p thá»§ cÃ´ng     | Tá»± Ä‘á»™ng sinh                |
| Validate                | KhÃ´ng cÃ³          | DÃ¹ng Zod Schema             |
| Preview metadata        | KhÃ´ng cÃ³          | CÃ³ modal xem trÆ°á»›c          |
| SEO JSON-LD             | ChÆ°a tÃ­ch há»£p     | TÃ­ch há»£p chuáº©n há»c thuáº­t    |

âœ… **Káº¿t quáº£:**

* Giao diá»‡n dashboard hiá»‡n Ä‘áº¡i hÆ¡n.
* Nghiá»‡p vá»¥ biÃªn táº­p chuáº©n OJS (Open Journal System).
* Há»— trá»£ indexing há»c thuáº­t (Google Scholar, Scopus).
* NÃ¢ng cao tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng & quáº£n lÃ½ ná»™i dung.