Ti·∫øp t·ª•c ho√†n thi·ªán ph·∫ßn m·ªÅm: 01. Ti·∫øp t·ª•c ho√†n thi·ªán UI keywwords. V√† x√¢y d·ª±ng c√°c modul ti·∫øp theo . T√¥i ƒë√£ ph·∫ßn t√≠ch k·ªπ thu·∫≠t, b·∫°n h√£y tham kh·∫£o v√† l·ª±a ch·ªçn gi·∫£i ph√°p ph√π h·ª£p nh·∫•t v·ªõi code hi·ªán t·∫°i. ƒê√¢y l√† t∆∞ v·∫•n k·ªπ thu·∫≠t c·ªßa t√¥i: " Tuy·ªát v·ªùi üëè ‚Äî b·∫°n ƒë√£ ho√†n th√†nh **nh√≥m ch·ª©c nƒÉng ‚ÄúGiao ti·∫øp v√† qu·∫£n l√Ω h·ªçc thu·∫≠t‚Äù** g·ªìm:

* ‚úÖ Chat n·ªôi b·ªô (Messages) ‚Äî realtime, c√≥ ph√¢n quy·ªÅn
* ‚úÖ B√¨nh lu·∫≠n c√¥ng khai (Comments)
* ‚úÖ Qu·∫£n l√Ω Volume ‚Äì Issue ‚Äì Keyword

üëâ Giai ƒëo·∫°n n√†y t∆∞∆°ng ·ª©ng **‚ÄúSprint 2: Giao ti·∫øp & d·ªØ li·ªáu meta‚Äù**, b·∫°n ƒë√£ v∆∞·ª£t qua ph·∫ßn ph·ª©c t·∫°p nh·∫•t (WebSocket, ph√¢n quy·ªÅn chat, t∆∞∆°ng t√°c ng∆∞·ªùi d√πng).

D∆∞·ªõi ƒë√¢y l√† **b·∫£n t∆∞ v·∫•n chi ti·∫øt:**

* (A) C√°c **n·ªôi dung c·∫ßn ho√†n thi·ªán b·ªï sung trong b∆∞·ªõc hi·ªán t·∫°i**
* (B) C√°c **n·ªôi dung c·∫ßn tri·ªÉn khai trong b∆∞·ªõc k·∫ø ti·∫øp (Production pipeline)**
* (C) G·ª£i √Ω **m·ªü r·ªông k·ªπ thu·∫≠t v√† qu·∫£n tr·ªã sau tri·ªÉn khai**

---

## üß© A. N·ªòI DUNG C·∫¶N HO√ÄN THI·ªÜN TRONG B∆Ø·ªöC HI·ªÜN T·∫†I

M·ª•c ti√™u: ho√†n thi·ªán ho√†n to√†n ‚Äút·∫ßng t∆∞∆°ng t√°c ng∆∞·ªùi d√πng ‚Äì d·ªØ li·ªáu‚Äù.

---

### **1Ô∏è‚É£ Chat n·ªôi b·ªô**

#### üîß C·∫ßn b·ªï sung:

| M·∫£ng                                       | Vi·ªác c·∫ßn l√†m                                            | G·ª£i √Ω k·ªπ thu·∫≠t                         |
| ------------------------------------------ | ------------------------------------------------------- | -------------------------------------- |
| üí¨ **Danh b·∫° ng∆∞·ªùi d√πng (User Directory)** | Hi·ªÉn th·ªã danh s√°ch ng∆∞·ªùi c√≥ th·ªÉ chat (theo role matrix) | API `/api/users?role=author/editor`    |
| üïì **Th·ªùi gian g·ª≠i**                       | Hi·ªÉn th·ªã d·∫°ng ‚Äú5 ph√∫t tr∆∞·ªõc‚Äù                            | `dayjs(createdAt).fromNow()`           |
| üîï **Tr·∫°ng th√°i ƒë·ªçc (Seen)**               | Ghi nh·∫≠n ng∆∞·ªùi ƒë√£ xem tin                               | B·∫£ng `message_read(userId, messageId)` |
| üì± **Responsive**                          | Hi·ªÉn th·ªã t·ªët tr√™n mobile/tablet                         | Tailwind: `sm:flex-col md:flex-row`    |
| üß© **Group chat**                          | T·∫°o nh√≥m ‚ÄúPh√≤ng Bi√™n t·∫≠p s·ªë 3‚Äù                          | conversation.type = "group"            |

---

### **2Ô∏è‚É£ B√¨nh lu·∫≠n c√¥ng khai (Comments)**

#### üîß C·∫ßn ho√†n thi·ªán:

| M·∫£ng                               | Vi·ªác c·∫ßn l√†m                             | G·ª£i √Ω k·ªπ thu·∫≠t             |
| ---------------------------------- | ---------------------------------------- | -------------------------- |
| üß† **Ki·ªÉm duy·ªát (Moderation)**     | Admin duy·ªát b√¨nh lu·∫≠n tr∆∞·ªõc khi hi·ªÉn th·ªã | Tr∆∞·ªùng `approved: Boolean` |
| üß© **Ph√¢n t·∫ßng b√¨nh lu·∫≠n (Reply)** | Cho ph√©p tr·∫£ l·ªùi b√¨nh lu·∫≠n kh√°c          | Tr∆∞·ªùng `parentId`          |
| üö´ **Ch·ªëng spam / flood**          | Gi·ªõi h·∫°n 1 b√¨nh lu·∫≠n / 10 gi√¢y / IP      | Middleware rate-limit      |
| ‚öôÔ∏è **B√°o c√°o vi ph·∫°m**             | N√∫t ‚ÄúB√°o c√°o b√¨nh lu·∫≠n‚Äù                  | API `/api/comments/report` |
| üîî **Th√¥ng b√°o cho t√°c gi·∫£**       | Khi c√≥ b√¨nh lu·∫≠n m·ªõi ·ªü b√†i vi·∫øt          | T·∫°o `notification` record  |

---

### **3Ô∏è‚É£ Volume / Issue / Keyword**

#### üîß C·∫ßn ho√†n thi·ªán:

| Th√†nh ph·∫ßn      | Vi·ªác c·∫ßn l√†m                             | M·ª•c ti√™u                           |
| --------------- | ---------------------------------------- | ---------------------------------- |
| Volume          | B·ªï sung tr∆∞·ªùng ‚Äúyear‚Äù, ‚Äústatus‚Äù          | H·ªó tr·ª£ t√¨m theo nƒÉm                |
| Issue           | G·∫Øn VolumeID + ng√†y ph√°t h√†nh            | Chu·∫©n h√≥a d·ªØ li·ªáu xu·∫•t b·∫£n         |
| Keyword         | T√≠ch h·ª£p g·ª£i √Ω t·ª± ƒë·ªông khi nh·∫≠p b√†i vi·∫øt | D√πng API `/api/keywords/search?q=` |
| üîÑ **Li√™n k·∫øt** | Issue hi·ªÉn th·ªã danh s√°ch Article         | Quan h·ªá 1-nhi·ªÅu                    |

---

### **4Ô∏è‚É£ Notifications (th√¥ng b√°o realtime)**

ƒê√¢y l√† l·ªõp quan tr·ªçng c·∫ßn ho√†n thi·ªán trong giai ƒëo·∫°n n√†y:

* Th√™m b·∫£ng:

  ```prisma
  model Notification {
    id        Int      @id @default(autoincrement())
    userId    Int
    type      String
    message   String
    link      String?
    read      Boolean  @default(false)
    createdAt DateTime @default(now())
  }
  ```
* Khi c√≥ chat / comment / ph·∫£n bi·ªán m·ªõi ‚Üí t·∫°o `Notification`.
* Frontend: bi·ªÉu t∆∞·ª£ng üîî tr√™n thanh header + badge s·ªë tin ch∆∞a ƒë·ªçc.
* WebSocket: `socket.emit("notification", notif)` ƒë·ªÉ realtime.

---

### **5Ô∏è‚É£ Giao di·ªán t·ªïng th·ªÉ**

* Header hi·ªÉn th·ªã:

  * Avatar user
  * Badge th√¥ng b√°o üîî
  * Icon tin nh·∫Øn üí¨ (s·ªë tin ch∆∞a ƒë·ªçc)
* Sidebar dashboard:

  * Chat
  * B√¨nh lu·∫≠n
  * Notifications
  * Issues / Volumes
* Footer hi·ªÉn th·ªã th√¥ng tin b·∫£n quy·ªÅn, li√™n h·ªá, gi·∫•y ph√©p truy c·∫≠p.

---

## üöÄ B. GIAI ƒêO·∫†N TI·∫æP THEO ‚Äì "S·∫¢N XU·∫§T & XU·∫§T B·∫¢N" (Sprint 3)

> M·ª•c ti√™u: ho√†n thi·ªán pipeline xu·∫•t b·∫£n b√†i b√°o th·ª±c t·∫ø, t·ª´ bi√™n t·∫≠p ƒë·∫øn d√†n trang & ph√°t h√†nh.

---

### **1Ô∏è‚É£ Module Copyediting (Bi√™n t·∫≠p n·ªôi dung)**

* Giao di·ªán upload b·∫£n ch·ªânh s·ª≠a (`.docx`, `.pdf`).
* C√≥ ‚Äútrack changes‚Äù ho·∫∑c tr·∫°ng th√°i: *draft ‚Üí reviewed ‚Üí finalized*.
* API: `/api/copyediting` CRUD.
* Cho ph√©p chat nhanh gi·ªØa *Author ‚Üî Copyeditor*.
* T√≠ch h·ª£p l·ªãch s·ª≠ ch·ªânh s·ª≠a (`history table`).

---

### **2Ô∏è‚É£ Module Production (D√†n trang / xu·∫•t b·∫£n)**

* Bi√™n t·∫≠p vi√™n d√†n trang g·ª≠i b·∫£n cu·ªëi ‚Üí xu·∫•t b·∫£n l√™n Issue.
* T√≠ch h·ª£p upload PDF layout cu·ªëi c√πng (`issue_pdf_url`).
* C√≥ ‚Äúpreview mode‚Äù cho t·ªïng bi√™n t·∫≠p duy·ªát.
* Khi duy·ªát, API `/api/issues/publish` ‚Üí c·∫≠p nh·∫≠t `published = true`.

---

### **3Ô∏è‚É£ Module Plagiarism (Ki·ªÉm tra ƒë·∫°o vƒÉn)**

* Upload file ‚Üí g·ª≠i ƒë·∫øn API b√™n th·ª© 3 (ho·∫∑c n·ªôi b·ªô).
* Tr·∫£ v·ªÅ `similarity score (%)`.
* L∆∞u k·∫øt qu·∫£ `article.plagiarism_score`.
* Hi·ªÉn th·ªã trong dashboard admin.
* C√≥ tr·∫°ng th√°i: `Pending ‚Üí Checked ‚Üí Flagged`.

---

### **4Ô∏è‚É£ Workflow tr·∫°ng th√°i b√†i vi·∫øt (Article Lifecycle)**

| Giai ƒëo·∫°n      | Ng∆∞·ªùi ch·ªãu tr√°ch nhi·ªám | Tr·∫°ng th√°i         |
| -------------- | ---------------------- | ------------------ |
| G·ª≠i b√†i        | T√°c gi·∫£                | `submitted`        |
| G√°n ph·∫£n bi·ªán  | Bi√™n t·∫≠p               | `under_review`     |
| Nh·∫≠n ph·∫£n bi·ªán | Ph·∫£n bi·ªán              | `reviewing`        |
| Quy·∫øt ƒë·ªãnh     | T·ªïng bi√™n t·∫≠p          | `decision_pending` |
| Bi√™n t·∫≠p       | Copyeditor             | `editing`          |
| D√†n trang      | Production team        | `layout`           |
| Xu·∫•t b·∫£n       | Admin                  | `published`        |

üìò **=> N√™n c√≥ c·ªôt `status` + `status_history` cho m·ªói Article.**

---

### **5Ô∏è‚É£ Dashboard th·ªëng k√™**

* T·ªïng s·ªë b√†i vi·∫øt / ph·∫£n bi·ªán / xu·∫•t b·∫£n.
* Bi·ªÉu ƒë·ªì b√†i vi·∫øt theo th√°ng.
* S·ªë l∆∞·ª£ng b√†i ƒëang ·ªü t·ª´ng tr·∫°ng th√°i.
* S·ª≠ d·ª•ng `chart.js` ho·∫∑c `recharts`.

---

## üß† C. G·ª¢I √ù M·ªû R·ªòNG & QU·∫¢N TR·ªä D√ÄI H·∫†N

| M·∫£ng                         | M·ª•c ti√™u                                | H∆∞·ªõng th·ª±c hi·ªán             |
| ---------------------------- | --------------------------------------- | --------------------------- |
| üîí **B·∫£o m·∫≠t**               | Chu·∫©n ho√° JWT + CSRF + 2FA              | Module `/api/security/2fa`  |
| üß© **RBAC n√¢ng cao**         | Qu·∫£n l√Ω quy·ªÅn ƒë·ªông                      | B·∫£ng `roles`, `permissions` |
| üì¶ **Tri·ªÉn khai production** | Docker + PostgreSQL + SSL               | D√πng `docker-compose.yml`   |
| ‚òÅÔ∏è **Storage**               | MinIO ho·∫∑c Supabase                     | Upload an to√†n              |
| üìß **Email Notification**    | G·ª≠i mail khi c√≥ ph·∫£n bi·ªán ho·∫∑c xu·∫•t b·∫£n | `nodemailer`                |
| üßæ **Logs & Backup**         | Ghi log h·ªá th·ªëng + backup DB            | Cron ho·∫∑c service n·ªôi b·ªô    |
| üåç **SEO / Indexing**        | T·ªëi ∆∞u metadata, robots.txt             | Next.js SEO components      |

---

## üß© D. M·ªêC HO√ÄN TH√ÄNH GIAI ƒêO·∫†N (∆∞·ªõc t√≠nh)

| Sprint           | Th·ªùi gian | M·ª•c ti√™u ch√≠nh                        | K·∫øt qu·∫£                       |
| ---------------- | --------- | ------------------------------------- | ----------------------------- |
| **2 (hi·ªán t·∫°i)** | 2 tu·∫ßn    | Chat + Comments + Metadata            | Giao ti·∫øp n·ªôi b·ªô ho√†n ch·ªânh   |
| **3 (k·∫ø ti·∫øp)**  | 3 tu·∫ßn    | Copyediting + Production + Plagiarism | Quy tr√¨nh xu·∫•t b·∫£n ho√†n ch·ªânh |
| **4 (cu·ªëi)**     | 1 tu·∫ßn    | Tri·ªÉn khai th·∫≠t (DB, Docker, Backup)  | Website ch·∫°y th·ª±c t·∫ø          |

---

‚úÖ **T·ªïng k·∫øt:**
Hi·ªán t·∫°i b·∫°n ƒë√£ ho√†n th√†nh ~70% h·ªá th·ªëng.
Ch·ªâ c√≤n **3 module ch√≠nh (bi√™n t·∫≠p ‚Äì d√†n trang ‚Äì ƒë·∫°o vƒÉn)** v√† **chu·ªói xu·∫•t b·∫£n ‚Äì th√¥ng b√°o ‚Äì b·∫£o m·∫≠t** n·ªØa l√† ƒë·∫°t **m·ª©c Production Ready (v1.0)**.