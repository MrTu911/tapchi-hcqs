XÃ¢y dá»±ng chá»©c nÄƒng LÆ°u trá»¯ (public), CÆ¡ sá»Ÿ dá»¯ liá»‡u cÃ¡c bÃ i bÃ¡o khoa há»c. ÄÃ¢y lÃ  phÃ¢n tÃ­ch tÆ° váº¥n cá»§a tÃ´i " **kiáº¿n trÃºc táº¡p chÃ­ khoa há»c hiá»‡n Ä‘áº¡i** theo chuáº©n quá»‘c táº¿ (OJS, Elsevier Editorial System, SpringerLink).
DÆ°á»›i Ä‘Ã¢y lÃ  **báº£n hÆ°á»›ng dáº«n triá»ƒn khai thá»±c táº¿** mÃ´ hÃ¬nh â€œHai táº§ngâ€ (Dashboard + Public) cho **Táº¡p chÃ­ QuÃ¢n sá»±**, Ä‘áº£m báº£o báº£o máº­t, tá»± Ä‘á»™ng cÃ´ng bá»‘, vÃ  tÆ°Æ¡ng thÃ­ch chuáº©n há»c thuáº­t.

---

## ğŸ—ï¸ I. Tá»•ng thá»ƒ kiáº¿n trÃºc há»‡ thá»‘ng

```
+-------------------------------------------------------------+
|                       PostgreSQL (CSDL chung)               |
|-------------------------------------------------------------|
| Báº£ng chÃ­nh: User, Article, Issue, Review, Category, Log ... |
+---------------------------+---------------------------------+
                            |
     +----------------------+----------------------+
     |                                             |
âš™ï¸ Dashboard ná»™i bá»™ (Private)               ğŸŒ Public Portal (Open)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- DÃ nh cho Editor, Reviewer, Admin          - DÃ nh cho NgÆ°á»i Ä‘á»c, NghiÃªn cá»©u sinh
- CÃ³ Ä‘Äƒng nháº­p (JWT / Session)              - KhÃ´ng cáº§n Ä‘Äƒng nháº­p
- CRUD bÃ i, xÃ©t duyá»‡t, pháº£n biá»‡n, xuáº¥t báº£n  - Xem, tÃ¬m kiáº¿m, táº£i PDF
- TÃ­ch há»£p DOI, gÃ¡n Issue                   - API Public tá»« DB chung
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

ğŸ‘‰ **Má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u, hai giao diá»‡n â€“ phÃ¢n quyá»n qua API vÃ  middleware.**

---

## âš™ï¸ II. Cáº¥u trÃºc ká»¹ thuáº­t dá»± Ã¡n Next.js + Prisma

```
project/
 â”œâ”€â”€ prisma/
 â”‚   â””â”€â”€ schema.prisma         # Äá»‹nh nghÄ©a CSDL
 â”œâ”€â”€ app/
 â”‚   â”œâ”€â”€ admin/                # Dashboard ná»™i bá»™
 â”‚   â”‚   â”œâ”€â”€ layout.tsx
 â”‚   â”‚   â”œâ”€â”€ articles/         # CRUD bÃ i bÃ¡o
 â”‚   â”‚   â”œâ”€â”€ issues/           # Quáº£n lÃ½ sá»‘ táº¡p chÃ­
 â”‚   â”‚   â””â”€â”€ reviewers/        # Quáº£n lÃ½ pháº£n biá»‡n
 â”‚   â”œâ”€â”€ archive/              # Public: danh sÃ¡ch sá»‘ táº¡p chÃ­
 â”‚   â”œâ”€â”€ article/[id]/         # Trang chi tiáº¿t bÃ i bÃ¡o
 â”‚   â”œâ”€â”€ api/
 â”‚   â”‚   â”œâ”€â”€ admin/            # API ná»™i bá»™ (yÃªu cáº§u token)
 â”‚   â”‚   â”‚   â””â”€â”€ articles/
 â”‚   â”‚   â””â”€â”€ public/           # API cÃ´ng khai (read-only)
 â”‚   â”‚       â””â”€â”€ articles/
 â”‚   â”œâ”€â”€ middleware.ts         # Kiá»ƒm tra quyá»n truy cáº­p
 â”‚   â””â”€â”€ layout.tsx
 â”œâ”€â”€ public/
 â”‚   â””â”€â”€ pdfs/                 # File PDF Ä‘Ã£ cÃ´ng bá»‘
 â”œâ”€â”€ .env                      # Biáº¿n mÃ´i trÆ°á»ng DB, JWT
 â””â”€â”€ package.json
```

---

## ğŸ§  III. MÃ´ hÃ¬nh dá»¯ liá»‡u cÆ¡ báº£n (`prisma/schema.prisma`)

```prisma
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String
  role      Role     @default(RESEARCHER)
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  articles  Article[]
}

model Article {
  id          String   @id @default(cuid())
  title       String
  abstract    String
  authors     String
  orgs        String?
  keywords    String[]
  doi         String?
  pdfUrl      String?
  isPublished Boolean  @default(false)
  issue       Issue?   @relation(fields: [issueId], references: [id])
  issueId     String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Issue {
  id          String   @id @default(cuid())
  title       String
  volume      Int
  number      Int
  year        Int
  coverImage  String?
  articles    Article[]
}

enum Role {
  ADMIN
  EDITOR
  REVIEWER
  RESEARCHER
}
```

---

## ğŸ” IV. PhÃ¢n táº§ng báº£o máº­t & truy cáº­p API

| API Route              | Quyá»n truy cáº­p   | MÃ´ táº£                     |
| ---------------------- | ---------------- | ------------------------- |
| `/api/admin/articles`  | Chá»‰ ADMIN/EDITOR | CRUD bÃ i, duyá»‡t xuáº¥t báº£n  |
| `/api/admin/review`    | EDITOR/REVIEWER  | Pháº£n biá»‡n                 |
| `/api/public/articles` | Má»i ngÆ°á»i        | Danh sÃ¡ch bÃ i Ä‘Ã£ duyá»‡t    |
| `/api/public/issues`   | Má»i ngÆ°á»i        | Danh sÃ¡ch sá»‘ táº¡p chÃ­      |
| `/api/public/search`   | Má»i ngÆ°á»i        | Tra cá»©u bÃ i, tÃ¡c giáº£, DOI |

---

### Middleware kiá»ƒm tra quyá»n (`middleware.ts`):

```ts
import { NextResponse } from "next/server";
import { verifyToken } from "@/lib/auth";

export async function middleware(req) {
  const url = req.nextUrl.pathname;

  if (url.startsWith("/admin")) {
    const token = req.cookies.get("token")?.value;
    const user = token && verifyToken(token);
    if (!user || !["ADMIN", "EDITOR", "REVIEWER"].includes(user.role)) {
      return NextResponse.redirect("/login");
    }
  }

  return NextResponse.next();
}
```

---

## ğŸ§© V. Luá»“ng hoáº¡t Ä‘á»™ng chuáº©n chá»‰nh

1ï¸âƒ£ **Editor/Reviewer Ä‘Äƒng nháº­p Dashboard**

* ThÃªm bÃ i, chá»‰nh sá»­a metadata, upload PDF.
* Khi duyá»‡t, báº­t cá» `isPublished = true`.

2ï¸âƒ£ **Há»‡ thá»‘ng tá»± Ä‘á»™ng cáº­p nháº­t ra Public Portal**

* `/archive` hiá»ƒn thá»‹ danh sÃ¡ch bÃ i bÃ¡o theo tá»«ng sá»‘ (Issue).
* `/article/[id]` hiá»ƒn thá»‹ chi tiáº¿t bÃ i vÃ  link PDF.

3ï¸âƒ£ **Public Portal**

* NgÆ°á»i dÃ¹ng tÃ¬m kiáº¿m theo tÃ¡c giáº£, DOI, lÄ©nh vá»±c, tá»« khÃ³a.
* PDF lÆ°u trong `/public/pdfs/`, hiá»ƒn thá»‹ qua viewer hoáº·c Flipbook.

4ï¸âƒ£ **Tá»± Ä‘á»™ng gÃ¡n DOI vÃ  chá»‰ má»¥c**

* Sau khi xuáº¥t báº£n, gá»i API CrossRef hoáº·c Zenodo Ä‘á»ƒ táº¡o DOI.
* Cáº­p nháº­t metadata `doi` trong CSDL.

---

## ğŸ§± VI. TÃ­ch há»£p chá»©c nÄƒng â€œKho lÆ°u trá»¯ há»c thuáº­tâ€

| Chá»©c nÄƒng              | MÃ´ táº£                                | Vá»‹ trÃ­                       |
| ---------------------- | ------------------------------------ | ---------------------------- |
| ğŸ” TÃ¬m kiáº¿m nÃ¢ng cao   | Theo tiÃªu Ä‘á», tÃ¡c giáº£, DOI, lÄ©nh vá»±c | `/archive`                   |
| ğŸ“‘ Gá»£i Ã½ bÃ i liÃªn quan | CÃ¹ng chá»§ Ä‘á» hoáº·c cÃ¹ng tÃ¡c giáº£        | `/article/[id]`              |
| ğŸ“Š PhÃ¡t hiá»‡n trÃ¹ng láº·p | So sÃ¡nh text-similarity 70â€“90%       | Dashboard (backend)          |
| ğŸ§¾ Xuáº¥t trÃ­ch dáº«n      | BibTeX / APA / IEEE                  | `/article/[id]`              |
| ğŸ“¬ API má»Ÿ              | `/api/public/search`                 | Cho há»c viÃªn, nhÃ  nghiÃªn cá»©u |

---

## ğŸ’¡ VII. Háº¡ táº§ng triá»ƒn khai khuyáº¿n nghá»‹

| ThÃ nh pháº§n    | Äá» xuáº¥t                                      | Ghi chÃº                     |
| ------------- | -------------------------------------------- | --------------------------- |
| MÃ¡y chá»§       | Windows Server hoáº·c Ubuntu 22+               | Cáº¥u hÃ¬nh >= 4GB RAM         |
| Node.js       | v20+                                         | Cháº¡y Next.js 14 á»•n Ä‘á»‹nh     |
| CSDL          | PostgreSQL 15+                               | Báº£o máº­t, há»— trá»£ Prisma tá»‘t  |
| PDF Storage   | ThÆ° má»¥c `public/pdfs/` hoáº·c Cloud (S3/MinIO) | Dá»… quáº£n lÃ½                  |
| Reverse Proxy | Nginx / IIS                                  | Äiá»u phá»‘i request / báº£o máº­t |
| SSL           | Letâ€™s Encrypt                                | HTTPS cho public portal     |

---

## ğŸ§  VIII. Lá»£i Ã­ch tá»•ng thá»ƒ cho Há»‡ thá»‘ng Táº¡p chÃ­ QuÃ¢n sá»±

âœ… **Má»™t CSDL duy nháº¥t â€“ nhiá»u táº§ng hiá»ƒn thá»‹**
âœ… **Tá»± Ä‘á»™ng xuáº¥t báº£n ra public khi duyá»‡t**
âœ… **ÄÃ¡p á»©ng chuáº©n há»c thuáº­t quá»‘c táº¿ (OAI, CrossRef, DOI)**
âœ… **An toÃ n thÃ´ng tin, phÃ¢n quyá»n cháº·t cháº½ theo vai trÃ²**
âœ… **CÃ³ thá»ƒ má»Ÿ rá»™ng sang há»‡ thá»‘ng quáº£n lÃ½ pháº£n biá»‡n vÃ  há»™i nghá»‹ khoa há»c**

---

NgÃ i muá»‘n tÃ´i **soáº¡n luÃ´n báº£n sÆ¡ Ä‘á»“ kiáº¿n trÃºc tá»•ng thá»ƒ (dashboard + public + database)** Ä‘á»ƒ hÃ¬nh dung luá»“ng dá»¯ liá»‡u vÃ  phÃ¢n táº§ng báº£o máº­t trá»±c quan chá»©, Master Tu?
SÆ¡ Ä‘á»“ Ä‘Ã³ sáº½ thá»ƒ hiá»‡n Ä‘áº§y Ä‘á»§ cÃ¡ch dá»¯ liá»‡u bÃ i bÃ¡o Ä‘i tá»« â€œbiÃªn táº­p â†’ duyá»‡t â†’ cÃ´ng bá»‘ â†’ tra cá»©u cÃ´ng khaiâ€.