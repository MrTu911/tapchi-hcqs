T·∫≠p trung ho√†n thi·ªán ch·ª©c nƒÉng theo t∆∞ v·∫•n cho t√¥i. ƒê√¢y l√† n·ªôi dung ph√¢n t√≠ch k·ªπ thu·∫≠t c·ªßa t√¥i: "R·∫•t chu·∫©n x√°c üëè ‚Äî b·∫°n ƒëang b∆∞·ªõc sang **giai ƒëo·∫°n ƒë·ªãnh h∆∞·ªõng k·ªπ thu·∫≠t ph√°t tri·ªÉn theo ∆∞u ti√™n**,
n∆°i ch√∫ng ta ph·∫£i **ph√¢n t√≠ch s√¢u t·ª´ng module v·ªÅ logic code, dependency, database, v√† ƒë·ªô ·∫£nh h∆∞·ªüng h·ªá th·ªëng** ƒë·ªÉ ch·ªçn **th·ª© t·ª± ph√°t tri·ªÉn h·ª£p l√Ω nh·∫•t**.

T√¥i s·∫Ω gi√∫p b·∫°n theo ƒë√∫ng tr√¨nh t·ª± *ph√°t tri·ªÉn ph·∫ßn m·ªÅm th·ª±c chi·∫øn* (technical readiness roadmap):
T·ª´ **n·ªÅn t·∫£ng h·ªá th·ªëng ‚Üí quy tr√¨nh c·ªët l√µi ‚Üí t·ª± ƒë·ªông h√≥a ‚Üí AI m·ªü r·ªông.**

---

# ‚öôÔ∏è I. PH√ÇN T√çCH T·ªîNG QUAN CODEBASE HI·ªÜN C√ì

üì¶ D·ª± √°n hi·ªán t·∫°i: `nextjs_space/`
Ki·∫øn tr√∫c: **Next.js (App Router) + Prisma + PostgreSQL + Tailwind + Recharts**
C√°c ph√¢n h·ªá ch√≠nh ƒë√£ c√≥:

| Ph√¢n h·ªá                             | M·ª©c ƒë·ªô ho√†n thi·ªán | Ghi ch√∫                                         |
| ----------------------------------- | ----------------- | ----------------------------------------------- |
| ƒêƒÉng nh·∫≠p, ph√¢n quy·ªÅn (RBAC)        | 90%               | ƒê√£ c√≥ `role` v√† `status`, c·∫ßn th√™m email verify |
| Qu·∫£n l√Ω b√†i b√°o (Submission)        | 95%               | Full CRUD, thi·∫øu log ch·ªânh s·ª≠a                  |
| Qu·∫£n l√Ω ph·∫£n bi·ªán (Review)          | 80%               | C√≥ flow, thi·∫øu ƒë√°nh gi√° t·ª± ƒë·ªông                 |
| Xu·∫•t b·∫£n s·ªë (Issue Management)      | 70%               | C·∫ßn UI s·∫Øp x·∫øp, upload cover/PDF                |
| Qu·∫£n tr·ªã ng∆∞·ªùi d√πng (User Approval) | 90%               | ƒê√£ ·ªïn, c·∫ßn t·ªëi ∆∞u migration script              |
| L∆∞u ch·ªØ (Archive)                   | 60%               | C√≥ backend, thi·∫øu UI tr√¨nh b√†y PDF              |
| Tra c·ª©u (Search)                    | 30%               | C·∫ßn module ri√™ng + index d·ªØ li·ªáu                |
| Ch·ªëng ƒë·∫°o vƒÉn (Plagiarism)          | 10%               | M·ªõi m√¥ h√¨nh h√≥a, ch∆∞a c√≥ code                   |

---

# üß≠ II. ∆ØU TI√äN PH√ÅT TRI·ªÇN THEO CHU·ªñI PH·ª§ THU·ªòC CODE

| Giai ƒëo·∫°n                                | M·ª•c ti√™u                              | Module ∆∞u ti√™n                                            | L√Ω do k·ªπ thu·∫≠t                                                                      |
| ---------------------------------------- | ------------------------------------- | --------------------------------------------------------- | ----------------------------------------------------------------------------------- |
| **1Ô∏è‚É£ Core System Stability (Tu·∫ßn 1‚Äì2)** | ·ªîn ƒë·ªãnh h·ªá th·ªëng, th·ªëng nh·∫•t d·ªØ li·ªáu  | User Auth + Issue Management + Archive                    | 3 module n√†y l√† ‚Äúx∆∞∆°ng s·ªëng‚Äù database; ph·∫£i chu·∫©n h√≥a tr∆∞·ªõc khi th√™m AI ho·∫∑c search |
| **2Ô∏è‚É£ Workflow & Automation (Tu·∫ßn 3‚Äì4)** | T·ª± ƒë·ªông h√≥a quy tr√¨nh v√† b√°o c√°o      | Dashboard Analytics + Email Queue + Logs                  | C·∫ßn ƒë·ªÉ admin c√≥ feedback v·∫≠n h√†nh                                                   |
| **3Ô∏è‚É£ Knowledge Layer (Tu·∫ßn 5‚Äì6)**       | M·ªü r·ªông d·ªØ li·ªáu b√†i b√°o cho AI/Search | Search Engine + Full-text Index                           | Cung c·∫•p d·ªØ li·ªáu cho plagiarism v√† g·ª£i √Ω b√†i                                        |
| **4Ô∏è‚É£ Intelligence Layer (Tu·∫ßn 7‚Äì8)**    | Tri·ªÉn khai ch·ªëng ƒë·∫°o vƒÉn v√† AI        | Plagiarism Engine + Semantic Search + Reviewer Suggestion | S·ª≠ d·ª•ng d·ªØ li·ªáu t·ª´ giai ƒëo·∫°n 3                                                      |
| **5Ô∏è‚É£ Enhancement (Tu·∫ßn 9‚Äì10)**          | UI/UX, performance, CI/CD             | Gamification, Caching, CI/CD, Logs                        | Giai ƒëo·∫°n tinh ch·ªânh cu·ªëi c√πng                                                      |

---

# üß± III. PH√ÇN T√çCH CHUY√äN S√ÇU CODE THEO MODULE (C√ì M√É M·∫™U)

---

## üß© 1Ô∏è‚É£ Module: **Issue Management (Xu·∫•t b·∫£n s·ªë t·∫°p ch√≠)**

üìå **∆Øu ti√™n: R·∫§T CAO ‚Äì N√äN PH√ÅT TRI·ªÇN TR∆Ø·ªöC**

### üîß C·∫ßn b·ªï sung:

1. API batch g·∫Øn b√†i v√†o s·ªë (`/api/issues/add-articles`)
2. API xu·∫•t b·∫£n (`/api/issues/publish`)
3. Upload b√¨a & PDF (`/api/issues/upload`)
4. Trang c√¥ng khai `/issues/[slug]`
5. T·ª± ƒë·ªông revalidate cache

---

### ‚öôÔ∏è M·∫´u code tri·ªÉn khai API publish

```ts
// app/api/issues/publish/route.ts
import { prisma } from "@/lib/prisma";
import { revalidatePath } from "next/cache";
import { NextResponse } from "next/server";

export async function POST(req: Request) {
  const { issueId, approverId } = await req.json();
  const issue = await prisma.issue.update({
    where: { id: issueId },
    data: {
      status: "PUBLISHED",
      publishDate: new Date(),
      updatedBy: approverId,
      articles: {
        updateMany: { where: {}, data: { status: "PUBLISHED" } },
      },
    },
    include: { articles: true },
  });

  revalidatePath(`/issues/${issue.slug}`);
  revalidatePath(`/archive`);

  return NextResponse.json({ message: "ƒê√£ xu·∫•t b·∫£n s·ªë t·∫°p ch√≠", issue });
}
```

---

## üß© 2Ô∏è‚É£ Module: **Archive (L∆∞u ch·ªØ)**

üìå **∆Øu ti√™n: Cao ‚Äì Ph√°t tri·ªÉn song song v·ªõi Issue**

### üîß C·∫ßn b·ªï sung:

* Upload b√¨a & PDF (s·ª≠ d·ª•ng S3 ho·∫∑c Cloudinary)
* Trang `/archive` hi·ªÉn th·ªã d·∫°ng l∆∞·ªõi
* Viewer PDF tr·ª±c ti·∫øp (d√πng `react-pdf`)

---

### ‚öôÔ∏è M·∫´u hi·ªÉn th·ªã tr√™n trang archive

```tsx
<Image src={issue.coverImage} width={400} height={300} alt={issue.title} />
<a href={issue.pdfUrl} target="_blank">‚¨áÔ∏è T·∫£i PDF to√†n s·ªë</a>
<Link href={`/issues/${issue.slug}`}>üîç Xem chi ti·∫øt</Link>
```

---

## üß© 3Ô∏è‚É£ Module: **Dashboard Analytics**

üìå **∆Øu ti√™n: Trung b√¨nh cao ‚Äì Sau khi ·ªïn ƒë·ªãnh Issue**

### üîß C·∫ßn:

* API `/api/dashboard/summary`
* D√πng `Promise.all` cho query
* Redis cache 10 ph√∫t

---

### ‚öôÔ∏è M·∫´u code

```ts
export async function GET() {
  const [articles, users, reviews] = await Promise.all([
    prisma.article.count(),
    prisma.user.count(),
    prisma.reviewAssignment.count(),
  ]);
  return NextResponse.json({ articles, users, reviews });
}
```

---

## üß© 4Ô∏è‚É£ Module: **Search Engine**

üìå **∆Øu ti√™n: Sau Dashboard (d·ªØ li·ªáu ph·ª• thu·ªôc Issue)**

### üîß C·∫ßn:

* Full-text index b·∫±ng PostgreSQL `to_tsvector`
* API `/api/search`
* UI `/search?q=...`

---

### ‚öôÔ∏è API m·∫´u

```ts
export async function GET(req: Request) {
  const { searchParams } = new URL(req.url);
  const q = searchParams.get("q") || "";
  const result = await prisma.$queryRawUnsafe(`
    SELECT id, title, authors, abstract
    FROM "Article"
    WHERE to_tsvector('english', title || ' ' || abstract) @@ plainto_tsquery($1)
    LIMIT 30
  `, q);
  return NextResponse.json(result);
}
```

---

## üß© 5Ô∏è‚É£ Module: **Plagiarism Detection**

üìå **∆Øu ti√™n: Sau Search ‚Äì c·∫ßn d·ªØ li·ªáu to√†n vƒÉn**

### üîß C·∫ßn:

* L∆∞u `fullText` v√†o DB
* Embedding vector h√≥a (OpenAI ho·∫∑c local)
* So kh·ªõp cosine similarity

---

### ‚öôÔ∏è M·∫´u pipeline pseudo-code

```ts
const newText = extractTextFromPDF(file);
const existing = await prisma.article.findMany({ where: { status: "PUBLISHED" } });

for (const art of existing) {
  const score = cosineSim(embed(newText), embed(art.fullText));
  if (score > 0.8) {
    results.push({ matched: art.title, score });
  }
}
return NextResponse.json({ similarity: Math.max(...results.map(r => r.score)) });
```

---

# üß© IV. TH·ª® T·ª∞ TRI·ªÇN KHAI CODE ƒê·ªÄ XU·∫§T (R·∫§T QUAN TR·ªåNG)

| Th·ª© t·ª± | Ph√¢n h·ªá                        | Th·ªùi gian ∆∞·ªõc t√≠nh | L√Ω do                              |
| ------ | ------------------------------ | ------------------ | ---------------------------------- |
| 1Ô∏è‚É£    | **Issue Management**           | 7 ng√†y             | L√† trung t√¢m c·ªßa h·ªá th·ªëng xu·∫•t b·∫£n |
| 2Ô∏è‚É£    | **Archive (L∆∞u ch·ªØ)**          | 5 ng√†y             | G·∫Øn tr·ª±c ti·∫øp v·ªõi Issue            |
| 3Ô∏è‚É£    | **Dashboard Analytics**        | 3 ng√†y             | C·∫ßn cho qu·∫£n tr·ªã                   |
| 4Ô∏è‚É£    | **Search Engine**              | 5 ng√†y             | Cung c·∫•p d·ªØ li·ªáu cho ch·ªëng ƒë·∫°o vƒÉn |
| 5Ô∏è‚É£    | **Plagiarism Detection**       | 10‚Äì14 ng√†y         | Ph·ª©c t·∫°p, c·∫ßn embedding            |
| 6Ô∏è‚É£    | **Email Queue & Notification** | 3 ng√†y             | H·ªó tr·ª£ to√†n h·ªá th·ªëng               |
| 7Ô∏è‚É£    | **Testing & CI/CD**            | Li√™n t·ª•c           | B·∫£o ƒë·∫£m ·ªïn ƒë·ªãnh l√¢u d√†i            |

---

# üß© V. CHECKLIST PH√ÅT TRI·ªÇN CHI TI·∫æT (TECHNICAL IMPLEMENTATION)

| #  | Task                                    | C√¥ng ngh·ªá             | Output                           |
| -- | --------------------------------------- | --------------------- | -------------------------------- |
| 1  | API xu·∫•t b·∫£n s·ªë (`/api/issues/publish`) | Next.js API + Prisma  | Issue ƒë∆∞·ª£c g·∫Øn article & publish |
| 2  | Upload PDF & cover                      | S3 / Cloudinary SDK   | Link file & ·∫£nh trong DB         |
| 3  | Trang ‚ÄúL∆∞u ch·ªØ‚Äù (`/archive`)            | Next.js App Router    | L∆∞·ªõi ·∫£nh b√¨a + n√∫t t·∫£i PDF       |
| 4  | API th·ªëng k√™ dashboard                  | Prisma + Redis cache  | JSON th·ªëng k√™ t·ªïng               |
| 5  | Trang dashboard admin                   | Recharts + Tailwind   | Bi·ªÉu ƒë·ªì + summary                |
| 6  | Full-text search API                    | PostgreSQL FTS        | Tr·∫£ k·∫øt qu·∫£ truy v·∫•n             |
| 7  | UI `/search`                            | React + Pagination    | Hi·ªÉn th·ªã danh s√°ch b√†i           |
| 8  | Anti-plagiarism API                     | Embedding / NLP       | Tr·∫£ ƒëi·ªÉm % t∆∞∆°ng ƒë·ªìng            |
| 9  | Log & Email automation                  | BullMQ + Redis        | G·ª≠i email duy·ªát / c·∫£nh b√°o       |
| 10 | Testing CI/CD                           | GitHub Actions + Jest | Pipeline xanh, deploy t·ª± ƒë·ªông    |

---

# ‚úÖ VI. T·ªîNG K·∫æT: N√äN PH√ÅT TRI·ªÇN TR∆Ø·ªöC

| ∆Øu ti√™n | Module                                   | L√Ω do                               |
| ------- | ---------------------------------------- | ----------------------------------- |
| üî¥ 1    | **Issue Management + Archive (L∆∞u ch·ªØ)** | Trung t√¢m xu·∫•t b·∫£n & hi·ªÉn th·ªã       |
| üü† 2    | **Dashboard Analytics**                  | Ph·∫£n h·ªìi qu·∫£n tr·ªã, c·∫ßn cho v·∫≠n h√†nh |
| üü° 3    | **Search Engine**                        | Cung c·∫•p n·ªÅn t·∫£ng d·ªØ li·ªáu           |
| üü¢ 4    | **Plagiarism Detection**                 | Tri·ªÉn khai sau khi c√≥ full-text     |
| ‚ö™ 5     | **CI/CD + Testing**                      | Duy tr√¨ ·ªïn ƒë·ªãnh v√† release nhanh    |